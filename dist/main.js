(()=>{"use strict";var e={805:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.randomFruit=void 0;const i=l(a(127));t.randomFruit=function(e,t){let a=e.filter((e=>!t.includes(e))),l=a[Math.floor(Math.random()*(a.length-1))],s=new i.default(l);return s.draw(),s}},138:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(30)),s=l(a(557));let n=document.getElementById("canvas").getContext("2d");if(null==n)throw new DOMException("No Canvas Found");const c=(0,i.default)(n);s.default.gameMap=c,s.default.startGame()},798:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(e,t){this.x=e,this.y=t}static setSize(e){this.size=e}static setStyle(e){this.style=e}draw(e){e.fillStyle=a.style,e.fillRect(this.x,this.y,a.size,a.size)}}t.default=a,a.style="rgb(100,100,100)"},127:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(798)),s=l(a(557));t.default=class{constructor(e){this.cell=e}beEaten(e){e.eat(this)}draw(){s.default.gameMap.ctx.fillStyle="rgb(255,255,255)",s.default.gameMap.ctx.fillRect(this.cell.x+i.default.size/4,this.cell.y+i.default.size/4,i.default.size/2,i.default.size/2)}clear(){this.cell.draw(s.default.gameMap.ctx)}}},250:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.ctx=e,this.cells=t}drawMap(){this.ctx.fillRect(0,0,10,10),this.cells.forEach((e=>{e.draw(this.ctx)}))}}},561:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(798)),s=a(821),n=l(a(557));t.default=class{constructor(e,t,a){this.headStyle="rgb(255,255,255)",this.bodyStyle="rgb(255,255,255)",this.cell=e,this.bodyCells=t,this.currentOrientation=a,this.selectedOrientation=a}setSelectedOrientation(e){this.selectedOrientation=e}drawHead(){switch(n.default.gameMap.ctx.fillStyle=this.headStyle,n.default.gameMap.ctx.beginPath(),this.currentOrientation){case s.Orientation.UP:n.default.gameMap.ctx.moveTo(this.cell.x,this.cell.y+i.default.size),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size/2,this.cell.y),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size,this.cell.y+i.default.size);break;case s.Orientation.DOWN:n.default.gameMap.ctx.moveTo(this.cell.x,this.cell.y),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size/2,this.cell.y+i.default.size),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size,this.cell.y);break;case s.Orientation.RIGHT:n.default.gameMap.ctx.moveTo(this.cell.x,this.cell.y),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size,this.cell.y+i.default.size/2),n.default.gameMap.ctx.lineTo(this.cell.x,this.cell.y+i.default.size);break;case s.Orientation.LEFT:n.default.gameMap.ctx.moveTo(this.cell.x,this.cell.y+i.default.size/2),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size,this.cell.y),n.default.gameMap.ctx.lineTo(this.cell.x+i.default.size,this.cell.y+i.default.size)}n.default.gameMap.ctx.fill()}draw(){this.drawBody(),this.drawHead()}drawBody(){n.default.gameMap.ctx.fillStyle=this.bodyStyle,this.bodyCells.forEach((e=>{n.default.gameMap.ctx.fillRect(e.x,e.y,i.default.size,i.default.size)}))}clearBody(){this.bodyCells.forEach((e=>{e.draw(n.default.gameMap.ctx)}))}clear(){this.clearBody(),this.clearHead()}clearHead(){this.cell.draw(n.default.gameMap.ctx)}eat(e){this.bodyCells.push(e.cell)}moveTo(e){this.clear(),this.bodyCells.shift(),this.bodyCells.push(this.cell),this.cell=e,this.draw()}calculateCell(){let e,t=n.default.gameMap.cells.findIndex((e=>e===this.cell));switch((0,s.isOppositeOrientation)(this.selectedOrientation,this.currentOrientation)||(this.currentOrientation=this.selectedOrientation),this.currentOrientation){case s.Orientation.LEFT:e=t-n.default.gameMap.ctx.canvas.clientWidth/i.default.size<0?n.default.gameMap.cells[n.default.gameMap.cells.length-n.default.gameMap.ctx.canvas.clientWidth/i.default.size+t]:n.default.gameMap.cells[t-n.default.gameMap.ctx.canvas.clientWidth/i.default.size];break;case s.Orientation.RIGHT:e=t+n.default.gameMap.ctx.canvas.clientWidth/i.default.size>n.default.gameMap.ctx.canvas.clientWidth/i.default.size*(n.default.gameMap.ctx.canvas.clientHeight/i.default.size)-1?n.default.gameMap.cells[t%(n.default.gameMap.ctx.canvas.clientWidth/i.default.size)]:n.default.gameMap.cells[t+n.default.gameMap.ctx.canvas.clientWidth/i.default.size];break;case s.Orientation.UP:e=t%(n.default.gameMap.ctx.canvas.clientHeight/i.default.size)==0?n.default.gameMap.cells[t+n.default.gameMap.ctx.canvas.clientHeight/i.default.size-1]:n.default.gameMap.cells[t-1];break;case s.Orientation.DOWN:e=t%(n.default.gameMap.ctx.canvas.clientHeight/i.default.size)==n.default.gameMap.ctx.canvas.clientHeight/i.default.size-1?n.default.gameMap.cells[t-t%(n.default.gameMap.ctx.canvas.clientHeight/i.default.size)]:n.default.gameMap.cells[t+1];break;default:return!1}return e}}},557:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(561)),s=a(805),n=a(821),c=a(788),r=a(273),d=l(a(30));class u{constructor(){throw new Error("You should not instantiate this class")}static startGame(){u.gameMap=(0,d.default)(this.gameMap.ctx),u.snake=new i.default(u.gameMap.cells[70],[u.gameMap.cells[30],u.gameMap.cells[50]],n.Orientation.RIGHT),u.snake.draw(),(0,c.setListener)(u.snake),u.setGameInterval()}static stopGame(){clearInterval(u.gameInterval),u.snake.clear(),u.fruit.clear(),u.gameMap.ctx.font="30px Arial",u.gameMap.ctx.textAlign="center",u.gameMap.ctx.fillStyle="white",u.gameMap.ctx.fillText("Game Over. Your score: "+(u.snake.bodyCells.length-2)+". Press Enter to play again.",u.gameMap.ctx.canvas.width/2,u.gameMap.ctx.canvas.height/2),delete u.snake,delete u.fruit,document.addEventListener("keydown",r.restartGame)}static setGameInterval(){let e=Object.create(u.snake.bodyCells);e.push(Object.create(u.snake.cell)),u.fruit=(0,s.randomFruit)(Object.create(u.gameMap.cells),e),u.gameInterval=setInterval((()=>{let t=u.snake.calculateCell();t&&u.snake.moveTo(t),u.snake.bodyCells.includes(u.snake.cell)&&u.stopGame(),u.fruit.cell===u.snake.cell&&(u.fruit.beEaten(u.snake),e=Object.create(u.snake.bodyCells),e.push(Object.create(u.snake.cell)),u.fruit=(0,s.randomFruit)(u.gameMap.cells,e))}),200)}}t.default=u},30:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(798)),s=l(a(250));t.default=function(e){i.default.setSize(40);let t=[];for(let a=0;a<e.canvas.clientWidth;a+=40)for(let l=0;l<e.canvas.clientHeight;l+=40)t.push(new i.default(a,l));const a=new s.default(e,t);return a.drawMap(),a}},788:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setListener=void 0;const l=a(821);t.setListener=function(e){document.addEventListener("keydown",(t=>{let a=e.selectedOrientation;switch(t.key){case"a":a!=l.Orientation.RIGHT&&(a=l.Orientation.LEFT);break;case"s":a!=l.Orientation.UP&&(a=l.Orientation.DOWN);break;case"d":a!=l.Orientation.LEFT&&(a=l.Orientation.RIGHT);break;case"w":a!=l.Orientation.DOWN&&(a=l.Orientation.UP)}e.setSelectedOrientation(a)}))}},821:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.isOppositeOrientation=t.Orientation=void 0,function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.RIGHT=2]="RIGHT",e[e.LEFT=3]="LEFT"}(a=t.Orientation||(t.Orientation={})),t.isOppositeOrientation=function(e,t){return[a.UP,a.DOWN]===[e,t]||[a.UP,a.DOWN]===[t,e]||[a.LEFT,a.RIGHT]===[e,t]||(a.LEFT,a.RIGHT),!1}},273:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.restartGame=void 0;const i=l(a(557));t.restartGame=function e(t){"Enter"==t.key&&(i.default.gameMap.ctx.clearRect(0,0,i.default.gameMap.ctx.canvas.width,i.default.gameMap.ctx.canvas.height),i.default.startGame(),document.removeEventListener("keydown",e))}}},t={};!function a(l){var i=t[l];if(void 0!==i)return i.exports;var s=t[l]={exports:{}};return e[l].call(s.exports,s,s.exports,a),s.exports}(138)})();